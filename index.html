<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pawn Shop Daily Cash Flow Sheet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .shop-name {
            color: #e67e22;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .date-section {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .date-box {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            font-weight: 600;
            color: #2c3e50;
        }
        
        .sheet-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .section-title {
            font-size: 1.3rem;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cash-in-section {
            border-top: 4px solid #2ecc71;
        }
        
        .cash-out-section {
            border-top: 4px solid #e74c3c;
        }
        
        .summary-section {
            border-top: 4px solid #3498db;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #444;
        }
        
        input, select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .transaction-row {
            display: grid;
            grid-template-columns: 2fr 1fr 40px;
            gap: 10px;
            margin-bottom: 12px;
            align-items: end;
        }
        
        .add-button {
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 10px;
        }
        
        .add-button:hover {
            background-color: #2980b9;
        }
        
        .delete-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            width: 40px;
            height: 40px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .delete-btn:hover {
            background-color: #c0392b;
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .summary-label {
            font-weight: 600;
            color: #555;
        }
        
        .summary-value {
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .cash-in {
            color: #2ecc71;
        }
        
        .cash-out {
            color: #e74c3c;
        }
        
        .net-cash {
            font-size: 1.3rem;
            padding-top: 15px;
            border-top: 2px solid #f0f0f0;
        }
        
        .positive {
            color: #2ecc71;
        }
        
        .negative {
            color: #e74c3c;
        }
        
        .zero {
            color: #7f8c8d;
        }
        
        .actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }
        
        .print-btn, .reset-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .print-btn {
            background-color: #2ecc71;
            color: white;
        }
        
        .print-btn:hover {
            background-color: #27ae60;
        }
        
        .reset-btn {
            background-color: #95a5a6;
            color: white;
        }
        
        .reset-btn:hover {
            background-color: #7f8c8d;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #7f8c8d;
            font-size: 0.9rem;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        .category-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 5px;
            margin-bottom: 10px;
            border-left: 4px solid #3498db;
        }
        
        @media print {
            body {
                background: white;
                padding: 10px;
            }
            
            .add-button, .delete-btn, .reset-btn, .print-btn {
                display: none !important;
            }
            
            .section {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Daily Cash Flow Sheet</h1>
            <div class="shop-name">Sampan Pawn Shop</div>
            <p>Track daily cash inflows and outflows for pawn shop operations</p>
            
            <div class="date-section">
                <div class="date-box">
                    <label for="date">Date:</label>
                    <input type="date" id="date" value="">
                </div>
                <div class="date-box">
                    <label for="prepared-by">Prepared By:</label>
                    <input type="text" id="prepared-by" placeholder="Staff Name">
                </div>
            </div>
        </header>
        
        <div class="sheet-container">
            <div class="section cash-in-section">
                <div class="section-title">
                    <span>Cash Inflows (Pumasok na Pera)</span>
                </div>
                
                <div class="category-item">
                    <div style="font-weight: bold; color: #2c3e50; margin-bottom: 5px;">Standard Pawn Shop Categories:</div>
                    <div style="font-size: 0.9em; color: #666;">Sales • Renew • Lukat • Additional Cash</div>
                </div>
                
                <div id="cash-in-container">
                    <!-- Sales -->
                    <div class="transaction-row">
                        <div class="form-group">
                            <label>Sales</label>
                            <input type="text" class="cash-in-desc" value="Sales - Various Items" readonly>
                        </div>
                        <div class="form-group">
                            <label>Amount (₱)</label>
                            <input type="number" class="cash-in-amount" placeholder="0.00" value="0" min="0" step="0.01">
                        </div>
                        <button class="delete-btn" onclick="deleteRow(this)">×</button>
                    </div>
                    
                    <!-- Renew -->
                    <div class="transaction-row">
                        <div class="form-group">
                            <input type="text" class="cash-in-desc" value="Renew - Interest Payments" readonly>
                        </div>
                        <div class="form-group">
                            <input type="number" class="cash-in-amount" placeholder="0.00" value="0" min="0" step="0.01">
                        </div>
                        <button class="delete-btn" onclick="deleteRow(this)">×</button>
                    </div>
                    
                    <!-- Lukat -->
                    <div class="transaction-row">
                        <div class="form-group">
                            <input type="text" class="cash-in-desc" value="Lukat - Item Redemptions" readonly>
                        </div>
                        <div class="form-group">
                            <input type="number" class="cash-in-amount" placeholder="0.00" value="0" min="0" step="0.01">
                        </div>
                        <button class="delete-btn" onclick="deleteRow(this)">×</button>
                    </div>
                    
                    <!-- Additional Cash -->
                    <div class="transaction-row">
                        <div class="form-group">
                            <input type="text" class="cash-in-desc" value="Additional Cash - Other Income" readonly>
                        </div>
                        <div class="form-group">
                            <input type="number" class="cash-in-amount" placeholder="0.00" value="0" min="0" step="0.01">
                        </div>
                        <button class="delete-btn" onclick="deleteRow(this)">×</button>
                    </div>
                </div>
                
                <button class="add-button" id="add-cash-in">
                    <span>+</span> Add Custom Cash In
                </button>
                
                <div class="summary-item">
                    <div class="summary-label">Total Cash In</div>
                    <div class="summary-value cash-in" id="total-cash-in">₱0.00</div>
                </div>
            </div>
            
            <div class="section cash-out-section">
                <div class="section-title">
                    <span>Cash Outflows (Labas na Pera)</span>
                </div>
                
                <div class="category-item">
                    <div style="font-weight: bold; color: #2c3e50; margin-bottom: 5px;">Standard Pawn Shop Categories:</div>
                    <div style="font-size: 0.9em; color: #666;">Expenses • Prenda • Scrap Gold • Scrap Silver</div>
                </div>
                
                <div id="cash-out-container">
                    <!-- Expenses -->
                    <div class="transaction-row">
                        <div class="form-group">
                            <label>Expenses</label>
                            <input type="text" class="cash-out-desc" value="Expenses - Utilities, Rent, etc." readonly>
                        </div>
                        <div class="form-group">
                            <label>Amount (₱)</label>
                            <input type="number" class="cash-out-amount" placeholder="0.00" value="0" min="0" step="0.01">
                        </div>
                        <button class="delete-btn" onclick="deleteRow(this)">×</button>
                    </div>
                    
                    <!-- Prenda -->
                    <div class="transaction-row">
                        <div class="form-group">
                            <input type="text" class="cash-out-desc" value="Prenda - New Pawns" readonly>
                        </div>
                        <div class="form-group">
                            <input type="number" class="cash-out-amount" placeholder="0.00" value="0" min="0" step="0.01">
                        </div>
                        <button class="delete-btn" onclick="deleteRow(this)">×</button>
                    </div>
                    
                    <!-- Scrap Gold -->
                    <div class="transaction-row">
                        <div class="form-group">
                            <input type="text" class="cash-out-desc" value="Scrap Gold Purchases" readonly>
                        </div>
                        <div class="form-group">
                            <input type="number" class="cash-out-amount" placeholder="0.00" value="0" min="0" step="0.01">
                        </div>
                        <button class="delete-btn" onclick="deleteRow(this)">×</button>
                    </div>
                    
                    <!-- Scrap Silver -->
                    <div class="transaction-row">
                        <div class="form-group">
                            <input type="text" class="cash-out-desc" value="Scrap Silver Purchases" readonly>
                        </div>
                        <div class="form-group">
                            <input type="number" class="cash-out-amount" placeholder="0.00" value="0" min="0" step="0.01">
                        </div>
                        <button class="delete-btn" onclick="deleteRow(this)">×</button>
                    </div>
                </div>
                
                <button class="add-button" id="add-cash-out">
                    <span>+</span> Add Custom Cash Out
                </button>
                
                <div class="summary-item">
                    <div class="summary-label">Total Cash Out</div>
                    <div class="summary-value cash-out" id="total-cash-out">₱0.00</div>
                </div>
            </div>
            
            <div class="section summary-section">
                <div class="section-title">
                    <span>Daily Cash Summary</span>
                </div>
                
                <div class="summary-item">
                    <div class="summary-label">Opening Balance</div>
                    <div class="summary-value">₱<input type="number" id="opening-balance" value="5000.00" style="width: 120px; text-align: right; border: none; font-weight: bold; font-size: 1.1rem;"></div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-label">Total Cash In</div>
                    <div class="summary-value cash-in" id="summary-cash-in">₱0.00</div>
                </div>
                
                <div class="summary-item">
                    <div class="summary-label">Total Cash Out</div>
                    <div class="summary-value cash-out" id="summary-cash-out">₱0.00</div>
                </div>
                
                <div class="summary-item net-cash">
                    <div class="summary-label">Net Cash Flow</div>
                    <div class="summary-value" id="net-cash-flow">₱0.00</div>
                </div>
                
                <div class="summary-item net-cash">
                    <div class="summary-label">Closing Balance</div>
                    <div class="summary-value" id="closing-balance">₱5,000.00</div>
                </div>
                
                <div class="form-group" style="margin-top: 25px;">
                    <label for="notes">Notes / Comments</label>
                    <textarea id="notes" rows="4" placeholder="Add any notes about today's transactions..." style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 5px; font-size: 1rem;"></textarea>
                </div>
            </div>
        </div>
        
        <div class="actions">
            <button class="print-btn" onclick="window.print()">Print / Save as PDF</button>
            <button class="reset-btn" onclick="resetForm()">Reset for New Day</button>
        </div>
        
        <footer>
            <p>Sampan Pawn Shop Daily Cash Flow Sheet &copy; <span id="current-year"></span> | Update daily for accurate cash tracking</p>
        </footer>
    </div>

    <script>
        // Set today's date as default
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
            
            // Set current year in footer
            document.getElementById('current-year').textContent = new Date().getFullYear();
            
            // Calculate initial totals
            calculateTotals();
            
            // Set up event listeners for inputs
            setupEventListeners();
        });
        
        function setupEventListeners() {
            // Listen for input changes to recalculate
            document.getElementById('cash-in-container').addEventListener('input', calculateTotals);
            document.getElementById('cash-out-container').addEventListener('input', calculateTotals);
            document.getElementById('opening-balance').addEventListener('input', calculateTotals);
            
            // Add cash in button
            document.getElementById('add-cash-in').addEventListener('click', function() {
                addTransactionRow('cash-in-container', 'cash-in-desc', 'cash-in-amount', 'Custom Income');
            });
            
            // Add cash out button
            document.getElementById('add-cash-out').addEventListener('click', function() {
                addTransactionRow('cash-out-container', 'cash-out-desc', 'cash-out-amount', 'Custom Expense');
            });
        }
        
        function addTransactionRow(containerId, descClass, amountClass, defaultDesc) {
            const container = document.getElementById(containerId);
            const row = document.createElement('div');
            row.className = 'transaction-row';
            
            row.innerHTML = `
                <div class="form-group">
                    <input type="text" class="${descClass}" value="${defaultDesc}">
                </div>
                <div class="form-group">
                    <input type="number" class="${amountClass}" placeholder="0.00" min="0" step="0.01">
                </div>
                <button class="delete-btn" onclick="deleteRow(this)">×</button>
            `;
            
            container.appendChild(row);
            
            // Add event listener to new inputs
            row.querySelector(`.${amountClass}`).addEventListener('input', calculateTotals);
        }
        
        function deleteRow(button) {
            const row = button.closest('.transaction-row');
            // Don't delete the standard categories (first 4 rows)
            const allRows = row.parentElement.querySelectorAll('.transaction-row');
            if (allRows.length > 4) {
                row.remove();
                calculateTotals();
            } else {
                alert("Cannot delete standard pawn shop categories. You can only delete custom entries.");
            }
        }
        
        function calculateTotals() {
            // Calculate total cash in
            let totalCashIn = 0;
            const cashInAmounts = document.querySelectorAll('.cash-in-amount');
            cashInAmounts.forEach(input => {
                const value = parseFloat(input.value) || 0;
                totalCashIn += value;
            });
            
            // Calculate total cash out
            let totalCashOut = 0;
            const cashOutAmounts = document.querySelectorAll('.cash-out-amount');
            cashOutAmounts.forEach(input => {
                const value = parseFloat(input.value) || 0;
                totalCashOut += value;
            });
            
            // Get opening balance
            const openingBalance = parseFloat(document.getElementById('opening-balance').value) || 0;
            
            // Calculate net cash flow and closing balance
            const netCashFlow = totalCashIn - totalCashOut;
            const closingBalance = openingBalance + netCashFlow;
            
            // Format numbers with commas and peso sign
            const formatCurrency = (num) => {
                return '₱' + num.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,');
            };
            
            // Update display
            document.getElementById('total-cash-in').textContent = formatCurrency(totalCashIn);
            document.getElementById('total-cash-out').textContent = formatCurrency(totalCashOut);
            document.getElementById('summary-cash-in').textContent = formatCurrency(totalCashIn);
            document.getElementById('summary-cash-out').textContent = formatCurrency(totalCashOut);
            document.getElementById('net-cash-flow').textContent = formatCurrency(netCashFlow);
            document.getElementById('closing-balance').textContent = formatCurrency(closingBalance);
            
            // Color code net cash flow
            const netCashElement = document.getElementById('net-cash-flow');
            if (netCashFlow > 0) {
                netCashElement.className = 'summary-value positive';
            } else if (netCashFlow < 0) {
                netCashElement.className = 'summary-value negative';
            } else {
                netCashElement.className = 'summary-value zero';
            }
            
            // Color code closing balance
            const closingElement = document.getElementById('closing-balance');
            if (closingBalance > openingBalance) {
                closingElement.className = 'summary-value positive';
            } else if (closingBalance < openingBalance) {
                closingElement.className = 'summary-value negative';
            } else {
                closingElement.className = 'summary-value zero';
            }
        }
        
        function resetForm() {
            if (confirm("Reset for a new day? This will clear all amounts but keep the categories. Closing balance will become tomorrow's opening balance.")) {
                // Clear amounts but keep categories
                const cashInInputs = document.querySelectorAll('.cash-in-amount');
                cashInInputs.forEach(input => {
                    input.value = '';
                });
                
                const cashOutInputs = document.querySelectorAll('.cash-out-amount');
                cashOutInputs.forEach(input => {
                    input.value = '';
                });
                
                // Remove custom rows only (keep first 4 standard categories)
                const cashInContainer = document.getElementById('cash-in-container');
                const cashOutContainer = document.getElementById('cash-out-container');
                
                // Remove extra rows beyond the first 4
                while (cashInContainer.querySelectorAll('.transaction-row').length > 4) {
                    cashInContainer.lastElementChild.remove();
                }
                
                while (cashOutContainer.querySelectorAll('.transaction-row').length > 4) {
                    cashOutContainer.lastElementChild.remove();
                }
                
                // Set opening balance to yesterday's closing balance
                const closingBalance = document.getElementById('closing-balance').textContent.replace('₱', '').replace(/,/g, '');
                document.getElementById('opening-balance').value = parseFloat(closingBalance).toFixed(2);
                
                // Clear notes
                document.getElementById('notes').value = '';
                
                // Set tomorrow's date
                const today = new Date();
                today.setDate(today.getDate() + 1);
                const tomorrow = today.toISOString().split('T')[0];
                document.getElementById('date').value = tomorrow;
                
                // Clear prepared by
                document.getElementById('prepared-by').value = '';
                
                // Recalculate
                calculateTotals();
                
                alert("Form reset for new day! Enter today's transactions.");
            }
        }
    </script>
</body>
</html>
